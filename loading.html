<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        let wid;
        let new_code;
        document.addEventListener('DOMContentLoaded', function() {
            window.loading.get_info((info) => {
                console.log(info);
                wid = info.wid;
            });
            window.loading.loading_done((code) => {
                console.log(code);
                new_code = code;
                document.getElementById('loading-container').style.display = 'none';
                document.getElementById('content-container').style.display = 'block';
            });
            document.getElementById('show-content-button').addEventListener('click', function() {
                let name = document.getElementById('input-field').value;
                console.log(name);
                const response = window.loading.save_bookmark({"name": name, "code": new_code})
                response.then(()=>{
                  console.log("saved");
                  window.loading.close_window(wid);
                })
            });
        });
    </script>
    <style>
        body {
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          margin: 0;
          background-color: #f0f0f0;
        }
    
        #loading-container {
          text-align: center;
        }
    
        #loading-animation {
          width: 50px;
          height: 50px;
          border: 5px solid #3498db;
          border-radius: 50%;
          border-top: 5px solid #e74c3c;
          animation: spin 1s linear infinite;
          margin-bottom: 10px;
        }
    
        #loading-text {
          font-family: Arial, sans-serif;
          font-size: 16px;
          color: #333;
        }
    
        #content-container {
          display: none;
          text-align: center;
          padding: 20px;
          border: 1px solid #ccc;
          border-radius: 8px;
        }

        #input-field {
            width: 200px;
            height: 120%;
            padding: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
          }
      
        #instruction-text {
            font-family: Arial, sans-serif;
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
          }

        #show-content-button {
          padding: 10px 20px;
          font-size: 14px;
          background-color: #3498db;
          color: #fff;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          outline: none;
        }
    
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      </style>
</head>
<body>
    <div id="loading-container">
        <div id="loading-animation"></div>
        <div id="loading-text">大模型处理中...</div>
      </div>
    
      <div id="content-container">
        <div id="instruction-text">保存为</div>
        <input type="text" id="input-field" placeholder="名称">
        <button id="show-content-button">保存</button>
      </div>
</body>
</html>
